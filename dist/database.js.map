{"version":3,"sources":["../server/database.js"],"names":["mysql","require","call","module","exports","selectUserByUsername","res","dieNutzerDaten","connection","console","log","username","query","escape","err","rows","fields","send","selectUserById","id","selectUserAndRoomByUsername","selectUserByUsernameOrEmail","email","selectUserByEmail","selectRooms","selectRoomById","selectRoomByUserId","userId","selectRoomHashedValue","hashedValue","selectRoomByTitle","title","selectVideosByRoomId","roomId","selectVideoByYoutubeId","youtubeId","insertUser","password","affectedRows","insertRoom","description","creator","insertVideo","videoId","videoTitle","videoDescription","videoThumbnailUrl","channelId","channelName","userName","insertPlaylist","updateUserPassword","passwordNew","updateUserRoomId","updateUpVotes","voteValue","deleteUserByID","deletePlaylist","createEventDropRoom","roomid","updateDeleteEvent"],"mappings":";;AACA;;;;;;AADA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;;;AAGA,IAAIC,OAAQC,OAAOC,OAAP,GAAiB;AAC3B;AACAC,wBAAsB,8BAASC,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC9DC,YAAQC,GAAR,CAAYH,eAAeI,QAA3B;AACA,QAAMC,QACJ,wCACAZ,MAAMa,MAAN,CAAaN,eAAeI,QAA5B,CADA,GAEA,GAHF;AAIAF,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,mDAAZ,EAAiEK,IAAjE;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUA;AACD,GApB0B;AAqB3BG,kBAAgB,wBAASZ,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACxD,QAAMI,QACJ,kCACAZ,MAAMa,MAAN,CAAaN,eAAeY,EAA5B,CADA,GAEA,GAHF;AAIAV,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,mDAAZ,EAAiEK,IAAjE;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GArC0B;AAsC3BK,+BAA6B,qCAASd,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACrEC,YAAQC,GAAR,CAAYH,eAAeI,QAA3B;AACA,QAAMC,QACJ,6CACAZ,MAAMa,MAAN,CAAaN,eAAeI,QAA5B,CADA,GAEA,8BAHF;AAIAF,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CACE,0DADF,EAEEK,IAFF;AAIAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KAZD;AAaA;AACD,GA3D0B;AA4D3BM,+BAA6B,qCAASf,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACrEC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,wCACAZ,MAAMa,MAAN,CAAaN,eAAeI,QAA5B,CADA,GAEA,aAFA,GAGAX,MAAMa,MAAN,CAAaN,eAAee,KAA5B,CAHA,GAIA,IALF;AAMAd,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CACE,0DADF,EAEEK,IAFF;AAIAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KAZD;AAaD,GAjF0B;AAkF3BQ,qBAAmB,2BAASjB,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC3D,QAAMI,QACJ,qCACAZ,MAAMa,MAAN,CAAaN,eAAee,KAA5B,CADA,GAEA,IAHF;AAIAd,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,gDAAZ,EAA8DK,IAA9D;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAjG0B;AAkG3BS,eAAa,qBAASlB,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACrD;;AAEA,QAAMI,QACJ,gJACA,oBADA,GAEA,+BAFA,GAGA,mBAHA,GAIA,+BALF;AAMAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,0CAAZ,EAAwDK,IAAxD;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GArH0B;AAsH3BU,kBAAgB,wBAASnB,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACxD,QAAMI,QACJ,kCAAkCZ,MAAMa,MAAN,CAAaN,eAAeY,EAA5B,CAAlC,GAAoE,IADtE;AAEAX,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,6CAAZ,EAA2DK,IAA3D;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAnI0B;AAoI3BW,sBAAoB,4BAASpB,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC5D,QAAMI,QACJ,0JACAZ,MAAMa,MAAN,CAAaN,eAAeoB,MAA5B,CADA,GAEA,IAHF;AAIAnB,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,iDAAZ,EAA+DK,IAA/D;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAnJ0B;AAoJ3Ba,yBAAuB,+BAAStB,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC/D,QAAMI,QACJ,+FACA,kBADA,GAEA,mCAFA,GAGA,qBAHA,GAIAZ,MAAMa,MAAN,CAAaN,eAAesB,WAA5B,CAJA,GAKA,IANF;AAOApB,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,oDAAZ,EAAkEK,IAAlE;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAvK0B;AAwK3Be,qBAAmB,2BAASxB,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC3D,QAAMI,QACJ,2DACAZ,MAAMa,MAAN,CAAaN,eAAewB,KAA5B,CADA,GAEA,IAHF;AAIAvB,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,gDAAZ,EAA8DK,IAA9D;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAvL0B;AAwL3BiB,wBAAsB,8BAAS1B,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC9D,QAAMI,QACJ,aACA,sBADA,GAEA,6DAFA,GAGAZ,MAAMa,MAAN,CAAaN,eAAe0B,MAA5B,CAHA,GAIA,iDALF;AAMAzB,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;AACDL,cAAQC,GAAR,CAAY,mDAAZ,EAAiEK,IAAjE;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KARD;AASD,GAxM0B;AAyM3BmB,0BAAwB,gCAAS5B,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAChE,QAAMI,QACJ,cACA,aADA,GAEA,4BAFA,GAGAZ,MAAMa,MAAN,CAAaN,eAAe4B,SAA5B,CAHA,GAIA,IALF;AAMA3B,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;AACDL,cAAQC,GAAR,CAAY,qDAAZ,EAAmEK,IAAnE;AACAT,UAAIW,IAAJ,CAASF,IAAT;AACD,KARD;AASD,GAzN0B;AA0N3B;AACAqB,cAAY,oBAAS9B,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACpDC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,yDACAZ,MAAMa,MAAN,CAAaN,eAAeI,QAA5B,CADA,GAEA,KAFA,GAGAX,MAAMa,MAAN,CAAaN,eAAee,KAA5B,CAHA,GAIA,KAJA,GAKAtB,MAAMa,MAAN,CAAaN,eAAe8B,QAA5B,CALA,GAMA,KAPF;AAQA7B,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,iCAAiCK,KAAKuB,YAAlD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GA/O0B;AAgP3BwB,cAAY,oBAASjC,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACpDC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,kFACAZ,MAAMa,MAAN,CAAaN,eAAewB,KAA5B,CADA,GAEA,KAFA,GAGA/B,MAAMa,MAAN,CAAaN,eAAeiC,WAA5B,CAHA,GAIA,KAJA,GAKAxC,MAAMa,MAAN,CAAaN,eAAe8B,QAA5B,CALA,GAMA,KANA,GAOArC,MAAMa,MAAN,CAAaN,eAAekC,OAA5B,CAPA,GAQA,KARA,GASAzC,MAAMa,MAAN,CAAaN,eAAesB,WAA5B,CATA,GAUA,KAXF;AAYArB,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,iCAAiCK,KAAKuB,YAAlD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAxQ0B;AAyQ3B2B,eAAa,qBAASpC,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACrDC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,iHACAZ,MAAMa,MAAN,CAAaN,eAAeoC,OAA5B,CADA,GAEA,KAFA,GAGA3C,MAAMa,MAAN,CAAaN,eAAeqC,UAA5B,CAHA,GAIA,KAJA,GAKA5C,MAAMa,MAAN,CAAaN,eAAesC,gBAA5B,CALA,GAMA,KANA,GAOA7C,MAAMa,MAAN,CAAaN,eAAeuC,iBAA5B,CAPA,GAQA,KARA,GASA9C,MAAMa,MAAN,CAAaN,eAAewC,SAA5B,CATA,GAUA,KAVA,GAWA/C,MAAMa,MAAN,CAAaN,eAAeyC,WAA5B,CAXA,GAYA,KAZA,GAaAhD,MAAMa,MAAN,CAAaN,eAAe0C,QAA5B,CAbA,GAcA,KAfF;AAgBAzC,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,iCAAiCK,KAAKuB,YAAlD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GArS0B;AAsS3BmC,kBAAgB,wBAAS5C,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACxDC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,qDACAZ,MAAMa,MAAN,CAAaN,eAAe0B,MAA5B,CADA,GAEA,KAFA,GAGAjC,MAAMa,MAAN,CAAaN,eAAeoC,OAA5B,CAHA,GAIA,KALF;AAMAnC,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,iCAAiCK,KAAKuB,YAAlD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAxT0B;AAyT3B;AACAoC,sBAAoB,4BAAS7C,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC5DC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,kBACA,kBADA,GAEAZ,MAAMa,MAAN,CAAaN,eAAe6C,WAA5B,CAFA,GAGA,cAHA,GAIApD,MAAMa,MAAN,CAAaN,eAAeY,EAA5B,CAJA,GAKA,IANF;AAOAV,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,gCAAgCK,KAAKuB,YAAjD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GA9U0B;;AAgV3BsC,oBAAkB,0BAAS/C,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC1DC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,kBACA,iBADA,GAEAZ,MAAMa,MAAN,CAAaN,eAAe0B,MAA5B,CAFA,GAGA,oBAHA,GAIAjC,MAAMa,MAAN,CAAaN,eAAeI,QAA5B,CAJA,GAKA,IANF;AAOAF,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,gCAAgCK,KAAKuB,YAAjD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GApW0B;AAqW3BuC,iBAAe,uBAAShD,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACvDC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,sBACA,6BADA,GAEAZ,MAAMa,MAAN,CAAaN,eAAegD,SAA5B,CAFA,GAGA,mBAHA,GAIAvD,MAAMa,MAAN,CAAaN,eAAe0B,MAA5B,CAJA,GAKA,kBALA,GAMAjC,MAAMa,MAAN,CAAaN,eAAeoC,OAA5B,CANA,GAOA,IARF;AASAlC,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,gCAAgCK,KAAKuB,YAAjD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GA3X0B;AA4X3B;AACAyC,kBAAgB,wBAASlD,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACxDC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,uBACA,cADA,GAEAZ,MAAMa,MAAN,CAAaN,eAAeY,EAA5B,CAFA,GAGA,IAJF;AAKAV,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,gCAAgCK,KAAKuB,YAAjD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GA/Y0B;;AAiZ3B0C,kBAAgB,wBAASnD,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AACxDC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,2BACA,mBADA,GAEAZ,MAAMa,MAAN,CAAaN,eAAe0B,MAA5B,CAFA,GAGA,kBAHA,GAIAjC,MAAMa,MAAN,CAAaN,eAAeoC,OAA5B,CAJA,GAKA,IANF;AAOAlC,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,gCAAgCK,KAAKuB,YAAjD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GAra0B;;AAua3B;AACA2C,uBAAqB,6BAASpD,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC7DC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,0BACAZ,MAAMa,MAAN,CAAaN,eAAeoD,MAA5B,CADA,GAEA,qDAFA,GAGA,KAHA,GAIA,mBAJA,GAKA,iBALA,GAMA3D,MAAMa,MAAN,CAAaN,eAAeoD,MAA5B,CANA,GAOA,GARF;AASAlD,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,+BAA+BK,KAAKuB,YAAhD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD,GA9b0B;AA+b3B;AACA6C,qBAAmB,2BAAStD,GAAT,EAAcC,cAAd,EAA8BC,UAA9B,EAA0C;AAC3DC,YAAQC,GAAR,CAAYH,cAAZ;AACA,QAAMK,QACJ,yBACAZ,MAAMa,MAAN,CAAaN,eAAeoD,MAA5B,CADA,GAEA,qDAFA,GAGA,KAHA,GAIA,mBAJA,GAKA,iBALA,GAMA3D,MAAMa,MAAN,CAAaN,eAAeoD,MAA5B,CANA,GAOA,GARF;AASAlD,YAAQC,GAAR,CAAYE,KAAZ;AACAJ,eAAWI,KAAX,CAAiBA,KAAjB,EAAwB,UAASE,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4B;AAClD,UAAIF,GAAJ,EAAS;AACPL,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYI,GAAZ;AACA;AACD;;AAEDL,cAAQC,GAAR,CAAY,+BAA+BK,KAAKuB,YAAhD;AACAhC,UAAIW,IAAJ,CAASF,IAAT;AACD,KATD;AAUD;AAtd0B,CAA7B","file":"database.js","sourcesContent":["const mysql = require(\"mysql\");\r\nimport $ from \"jquery\";\r\n\r\nvar call = (module.exports = {\r\n  //----------------------SELECT----------------------//\r\n  selectUserByUsername: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten.username);\r\n    const query =\r\n      \"SELECT * from user WHERE username= \" +\r\n      mysql.escape(dieNutzerDaten.username) +\r\n      \";\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectUserByUsername succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n    //AUF SICHERHEIT DER EINGEGEBENEN SACHEN NOCH PRÜFEN MYSQLI STRING UND SO DIESER SCHEIß!\r\n  },\r\n  selectUserById: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      \"SELECT * from user WHERE id= \" +\r\n      mysql.escape(dieNutzerDaten.id) +\r\n      \";\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectUserByUsername succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectUserAndRoomByUsername: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten.username);\r\n    const query =\r\n      \"SELECT * from user,room WHERE username= \" +\r\n      mysql.escape(dieNutzerDaten.username) +\r\n      \" AND room.ID = user.room_id;\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\r\n        \"Query selectUserAndRoomByUsername succesfully executed: \",\r\n        rows\r\n      );\r\n      res.send(rows);\r\n    });\r\n    //AUF SICHERHEIT DER EINGEGEBENEN SACHEN NOCH PRÜFEN MYSQLI STRING UND SO DIESER SCHEIß!\r\n  },\r\n  selectUserByUsernameOrEmail: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"SELECT * from user WHERE username= \" +\r\n      mysql.escape(dieNutzerDaten.username) +\r\n      \" OR email= \" +\r\n      mysql.escape(dieNutzerDaten.email) +\r\n      \" ;\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\r\n        \"Query selectUserByUsernameOrEmail succesfully executed: \",\r\n        rows\r\n      );\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectUserByEmail: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      \"SELECT * from user WHERE email= \" +\r\n      mysql.escape(dieNutzerDaten.email) +\r\n      \" ;\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectUserByEmail succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectRooms: function(res, dieNutzerDaten, connection) {\r\n    /*const query =\r\n      \"SELECT * from room ;\";*/\r\n    const query =\r\n      \"SELECT room.id, room.title, room.description, room.password, room.thumbnail, room.creator, room.hashedValue, COUNT(user.ID) as 'ActiveUser'\" +\r\n      \" FROM `room`, user\" +\r\n      \" WHERE room.id = user.room_id\" +\r\n      \" GROUP BY room.ID\" +\r\n      \" ORDER BY count(user.ID) desc\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectRooms succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectRoomById: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      \"SELECT * from room WHERE ID= \" + mysql.escape(dieNutzerDaten.id) + \" ;\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectRoomById succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectRoomByUserId: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      'SELECT room.ID, room.title, user.username as \"Ersteller\", room.description, room.password FROM room, user WHERE user.room_id = room.ID AND user.ID = ' +\r\n      mysql.escape(dieNutzerDaten.userId) +\r\n      \" ;\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectRoomByUserId succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectRoomHashedValue: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      'SELECT room.ID, room.title, user.username as \"Ersteller\", room.description, room.password ' +\r\n      \"FROM room, user \" +\r\n      \"WHERE user.ID = room.creator AND \" +\r\n      \"room.hashedValue = \" +\r\n      mysql.escape(dieNutzerDaten.hashedValue) +\r\n      \" ;\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectRoomHashedValue succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectRoomByTitle: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      \"SELECT title, hashedValue, ID FROM `room` WHERE title=\" +\r\n      mysql.escape(dieNutzerDaten.title) +\r\n      \" ;\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Query selectRoomByTitle succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectVideosByRoomId: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      \"SELECT *\" +\r\n      \" FROM playlist,video\" +\r\n      \" WHERE video.ID = playlist.video_ID AND playlist.room_id = \" +\r\n      mysql.escape(dieNutzerDaten.roomId) +\r\n      \" ORDER BY playlist.Upvotes DESC, Timestamp ASC;\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n      console.log(\"Query selectVideosByRoomId succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  selectVideoByYoutubeId: function(res, dieNutzerDaten, connection) {\r\n    const query =\r\n      \"SELECT ID\" +\r\n      \" FROM video\" +\r\n      \" WHERE video.youtube_id = \" +\r\n      mysql.escape(dieNutzerDaten.youtubeId) +\r\n      \" ;\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n      console.log(\"Query selectVideoByYoutubeId succesfully executed: \", rows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  //----------------------INSERT----------------------//\r\n  insertUser: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"INSERT INTO user (username, email, password)VALUES (\" +\r\n      mysql.escape(dieNutzerDaten.username) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.email) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.password) +\r\n      \" );\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records inserted: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  insertRoom: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"INSERT INTO room (title, description, password, creator, hashedValue)VALUES (\" +\r\n      mysql.escape(dieNutzerDaten.title) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.description) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.password) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.creator) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.hashedValue) +\r\n      \" );\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records inserted: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  insertVideo: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"INSERT INTO video (youtube_id, title, description, thumbnail_url, channel_id, channel_name, user_id)VALUES (\" +\r\n      mysql.escape(dieNutzerDaten.videoId) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.videoTitle) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.videoDescription) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.videoThumbnailUrl) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.channelId) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.channelName) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.userName) +\r\n      \" );\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records inserted: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  insertPlaylist: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"INSERT INTO playlist (room_ID, video_ID)VALUES (\" +\r\n      mysql.escape(dieNutzerDaten.roomId) +\r\n      \" , \" +\r\n      mysql.escape(dieNutzerDaten.videoId) +\r\n      \" );\";\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records inserted: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  //----------------------update----------------------//\r\n  updateUserPassword: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"Update `user`\" +\r\n      \" SET `password`=\" +\r\n      mysql.escape(dieNutzerDaten.passwordNew) +\r\n      \" WHERE `ID`=\" +\r\n      mysql.escape(dieNutzerDaten.id) +\r\n      \" ;\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records updated: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n\r\n  updateUserRoomId: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"Update `user`\" +\r\n      \" SET `room_id`=\" +\r\n      mysql.escape(dieNutzerDaten.roomId) +\r\n      \" WHERE `username`=\" +\r\n      mysql.escape(dieNutzerDaten.username) +\r\n      \" ;\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records updated: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  updateUpVotes: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"Update `playlist`\" +\r\n      \" SET `Upvotes`=`Upvotes` + \" +\r\n      mysql.escape(dieNutzerDaten.voteValue) +\r\n      \" WHERE `room_ID`=\" +\r\n      mysql.escape(dieNutzerDaten.roomId) +\r\n      \" AND `video_ID`=\" +\r\n      mysql.escape(dieNutzerDaten.videoId) +\r\n      \" ;\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records updated: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  //-------------------------delete----------------------//\r\n  deleteUserByID: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"DELETE FROM `user`\" +\r\n      \" WHERE `ID`=\" +\r\n      mysql.escape(dieNutzerDaten.id) +\r\n      \" ;\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records deleted: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n\r\n  deletePlaylist: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"DELETE FROM `playlist`\" +\r\n      \" WHERE `room_ID`=\" +\r\n      mysql.escape(dieNutzerDaten.roomId) +\r\n      \" AND `video_ID`=\" +\r\n      mysql.escape(dieNutzerDaten.videoId) +\r\n      \" ;\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of records deleted: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n\r\n  //--------------------create event drop room-------------------//\r\n  createEventDropRoom: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"CREATE EVENT dropRoom\" +\r\n      mysql.escape(dieNutzerDaten.roomid) +\r\n      \" ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 HOUR\" +\r\n      \" DO\" +\r\n      \" DELETE FROM room\" +\r\n      \" WHERE room.id=\" +\r\n      mysql.escape(dieNutzerDaten.roomid) +\r\n      \";\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of created events: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  },\r\n  //------------------alters the drop room event------------------//\r\n  updateDeleteEvent: function(res, dieNutzerDaten, connection) {\r\n    console.log(dieNutzerDaten);\r\n    const query =\r\n      \"ALTER EVENT dropRoom\" +\r\n      mysql.escape(dieNutzerDaten.roomid) +\r\n      \" ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 HOUR\" +\r\n      \" DO\" +\r\n      \" DELETE FROM room\" +\r\n      \" WHERE room.id=\" +\r\n      mysql.escape(dieNutzerDaten.roomid) +\r\n      \";\";\r\n    console.log(query);\r\n    connection.query(query, function(err, rows, fields) {\r\n      if (err) {\r\n        console.log(\"An error ocurred performing the query.\");\r\n        console.log(err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"Number of altered events: \" + rows.affectedRows);\r\n      res.send(rows);\r\n    });\r\n  }\r\n});\r\n"]}